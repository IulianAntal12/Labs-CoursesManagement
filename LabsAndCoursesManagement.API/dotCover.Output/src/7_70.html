<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Facultate\Labs-CoursesManagement\LabsAndCoursesManagement.API\LabsAndCoursesManagement.WebAPI\Program.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using LabsAndCoursesManagement.BusinessLogic.Interfaces;
using LabsAndCoursesManagement.BusinessLogic.Services;
using LabsAndCoursesManagement.DataAccess.Database;
using LabsAndCoursesManagement.DataAccess.Repositories;
using LabsAndCoursesManagement.DataAccess.Repositories.GenericRepositories;
using LabsAndCoursesManagement.Models.Models;
using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);

// Add services to the container.

builder.Services.AddControllers();
// Learn more about configuring Swagger/OpenAPI at https://aka.ms/aspnetcore/swashbuckle
builder.Services.AddEndpointsApiExplorer();
builder.Services.AddSwaggerGen();
builder.Services.AddScoped&lt;DatabaseContext&gt;();
builder.Services.AddScoped&lt;IRepository&lt;Teacher&gt;, TeacherRepository&gt;();
builder.Services.AddScoped&lt;IRepository&lt;Lab&gt;, LabRepository&gt;();
builder.Services.AddScoped&lt;IRepository&lt;Student&gt;, StudentRepository&gt;();
builder.Services.AddScoped&lt;ITeacherService, TeacherService&gt;();
builder.Services.AddScoped&lt;IStudentService, StudentService&gt;();
builder.Services.AddScoped&lt;ILabService, LabService&gt;();

builder.Services.AddControllers().AddNewtonsoftJson(options =&gt;
    options.SerializerSettings.ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Ignore
);

builder.Services.AddDbContext&lt;DatabaseContext&gt;(
    options =&gt; options.UseSqlServer(
        builder.Configuration.GetConnectionString(&quot;LabsAndCoursesDb&quot;),
    b =&gt; b.MigrationsAssembly(typeof(DatabaseContext).Assembly.FullName))
    .LogTo(Console.WriteLine, new[] { DbLoggerCategory.Database.Command.Name }, LogLevel.Information)
        .EnableSensitiveDataLogging()
    );
    
builder.Services.AddScoped&lt;IRepository&lt;User&gt;, UserRepository&gt;();
/*builder.Services.AddAuthentication(options =&gt;
{
    options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme;
    options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme;
    options.DefaultScheme = JwtBearerDefaults.AuthenticationScheme;
}).AddJwtBearer(o =&gt;
{
    o.TokenValidationParameters = new TokenValidationParameters
    {
        ValidIssuer = builder.Configuration[&quot;JWT:Issuer&quot;],
        ValidAudience = builder.Configuration[&quot;JWT:Audience&quot;],
        IssuerSigningKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(builder.Configuration[&quot;JWT.Key&quot;])),
        ValidateIssuer = true,
        ValidateAudience = true,
        ValidateLifetime = false, // TODO: change that later
        ValidateIssuerSigningKey = true
    };
});*/

builder.Services.AddAuthorization();

var app = builder.Build();

// Configure the HTTP request pipeline.
if (app.Environment.IsDevelopment())
{
    app.UseSwagger();
    app.UseSwaggerUI();
}

app.UseCors(x =&gt; x
    .AllowAnyOrigin()
    .AllowAnyMethod()
    .AllowAnyHeader());

app.UseHttpsRedirection();

app.UseAuthentication();
app.UseAuthorization();

app.MapControllers();

app.Run();

public partial class Program { }
    </pre>
    <script type="text/javascript">
      highlightRanges([[9,1,9,50,1],[13,1,13,35,1],[15,1,15,44,1],[16,1,16,34,1],[17,1,17,47,1],[18,1,18,71,1],[19,1,19,63,1],[20,1,20,71,1],[21,1,21,63,1],[22,1,22,63,1],[23,1,23,55,1],[25,1,26,5,1],[26,5,26,100,1],[26,100,27,3,1],[29,1,30,16,1],[30,16,32,10,0],[32,10,32,73,0],[32,73,34,38,0],[34,38,35,7,1],[37,1,37,65,1],[57,1,57,37,1],[59,1,59,27,1],[62,1,62,37,1],[63,1,63,2,1],[64,5,64,22,1],[65,5,65,24,1],[66,1,66,2,1],[68,1,68,18,1],[68,18,71,22,1],[71,22,71,24,1],[73,1,73,27,1],[75,1,75,25,1],[76,1,76,24,1],[78,1,78,22,1],[80,1,80,11,1]]);
    </script>
  </body>
</html>