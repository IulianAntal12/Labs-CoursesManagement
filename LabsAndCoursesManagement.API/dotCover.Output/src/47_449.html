<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Facultate\Labs-CoursesManagement\LabsAndCoursesManagement.API\LabsAndCoursesManagement.Tests\TeacherServiceTests.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using AutoMapper;
using LabsAndCoursesManagement.BusinessLogic.Mappers;
using LabsAndCoursesManagement.BusinessLogic.Services;
using LabsAndCoursesManagement.DataAccess.Repositories;
using LabsAndCoursesManagement.Models.Dtos;
using LabsAndCoursesManagement.Models.Models;
using Moq;

namespace LabsAndCoursesManagement.Tests
{
    public class TeacherServiceTests
    {
        private readonly Mock&lt;IRepository&lt;Teacher&gt;&gt; teacherRepositoryMoq = new();
        private readonly Mock&lt;IRepository&lt;Lab&gt;&gt; labRepositoryMoq = new();
        private TeacherService teacherService;
        private IMapper mapper; 

        [SetUp]
        public void Setup()
        {
            teacherService = new TeacherService(teacherRepositoryMoq.Object, labRepositoryMoq.Object);
            mapper = new AutoMapperBuilder().Build();
        }

        [Test]
        public void AddTeacher_NotNullEntity_IsSuccessShouldBeTrue()
        {
            //arrange
            var teacherDto = new CreateTeacherDto()
            {
                FullName = &quot;TestName&quot;,
                Cabinet = &quot;111&quot;,
                Email = &quot;a@a.a&quot;,
                PhoneNumber = &quot;0711111111&quot;,
                Role = &quot;Assistant&quot;
            };

            //act
            var result = teacherService.Add(teacherDto);


            //assert
            Assert.That(result.Result.IsSuccess, Is.True);
        }

        [Test]
        public void DeleteTeacher_ExistingEntity_IsSuccessShouldBeTrue()
        {
            //arrange
            var TeacherDto = new CreateTeacherDto()
            {
                FullName = &quot;TestName&quot;,
                Cabinet = &quot;111&quot;,
                Email = &quot;a@a.a&quot;,
                PhoneNumber = &quot;0711111111&quot;,
                Role = &quot;Assistant&quot;
            };
            var Teacher = mapper.Map&lt;Teacher&gt;(TeacherDto);

            //act
            teacherRepositoryMoq.Setup(x =&gt; x.Get(Teacher.Id)).Returns(Task.FromResult(Teacher));
            var result = teacherService.Delete((Guid)Teacher.Id);

            //assert
            Assert.That(result.Result.IsSuccess, Is.True);
        }

        [Test]
        public void DeleteTeacher_NotexistingEntity_IsSuccessShouldBeFalse()
        {
            //arrange
            var TeacherDto = new CreateTeacherDto()
            {
                FullName = &quot;TestName&quot;,
                Cabinet = &quot;111&quot;,
                Email = &quot;a@a.a&quot;,
                PhoneNumber = &quot;0711111111&quot;,
                Role = &quot;Assistant&quot;
            };
            var Teacher = mapper.Map&lt;Teacher&gt;(TeacherDto);

            //act
            var result = teacherService.Delete((Guid)Teacher.Id);

            //assert
            Assert.That(result.Result.IsSuccess, Is.False);
        }

        [Test]
        public void GetAll_ShouldReturnAListOfTeachers()
        {
            //arrange
            var TeacherDto = new CreateTeacherDto()
            {
                FullName = &quot;TestName&quot;,
                Cabinet = &quot;111&quot;,
                Email = &quot;a@a.a&quot;,
                PhoneNumber = &quot;0711111111&quot;,
                Role = &quot;Assistant&quot;
            };
            var Teacher = mapper.Map&lt;Teacher&gt;(TeacherDto);
            IEnumerable&lt;Teacher&gt; Teachers = new List&lt;Teacher&gt;() { Teacher};

            //act
            teacherRepositoryMoq.Setup(x =&gt; x.All()).Returns(Task.FromResult(Teachers));
            var result = teacherService.GetAll();

            //assert
            Assert.That(Teachers.AsEnumerable&lt;Teacher&gt;, Is.EqualTo(result.Result.Entity));
        }

        [Test]
        public void GetBy_ExistingTeacher_IsSuccessShouldBeTrue()
        {
            //arrange
            var TeacherDto = new CreateTeacherDto()
            {
                FullName = &quot;TestName&quot;,
                Cabinet = &quot;111&quot;,
                Email = &quot;a@a.a&quot;,
                PhoneNumber = &quot;0711111111&quot;,
                Role = &quot;Assistant&quot;
            };
            var Teacher = mapper.Map&lt;Teacher&gt;(TeacherDto);

            //act
            teacherRepositoryMoq.Setup(x =&gt; x.Get(Teacher.Id)).Returns(Task.FromResult(Teacher));
            var result = teacherService.GetById((Guid)Teacher.Id);

            //assert
            Assert.That(result.Result.IsSuccess, Is.True);
        }

        [Test]
        public void GetBy_ExistingTeacher_IsSuccessShouldBeFalse()
        {
            //act
            var result = teacherService.GetById(new Guid());

            //assert
            Assert.That(result.Result.IsSuccess, Is.False);
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[13,9,13,82,1],[14,9,14,74,1],[20,9,20,10,1],[21,13,21,103,1],[22,13,22,54,1],[23,9,23,10,1],[27,9,27,10,1],[29,13,36,15,1],[39,13,39,57,1],[43,13,43,59,1],[44,9,44,10,1],[48,9,48,10,1],[50,13,57,15,1],[58,13,58,59,1],[61,13,61,98,1],[62,13,62,66,1],[65,13,65,59,1],[66,9,66,10,1],[70,9,70,10,1],[72,13,79,15,1],[80,13,80,59,1],[83,13,83,66,1],[86,13,86,60,1],[87,9,87,10,1],[91,9,91,10,1],[93,13,100,15,1],[101,13,101,59,1],[102,13,102,76,1],[105,13,105,89,1],[106,13,106,50,1],[109,13,109,91,1],[110,9,110,10,1],[114,9,114,10,1],[116,13,123,15,1],[124,13,124,59,1],[127,13,127,98,1],[128,13,128,67,1],[131,13,131,59,1],[132,9,132,10,1],[136,9,136,10,1],[138,13,138,61,1],[141,13,141,60,1],[142,9,142,10,1]]);
    </script>
  </body>
</html>